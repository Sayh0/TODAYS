<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Today's</title>
</head>
<!-- 파비콘 추가 -->
<link rel="icon" href="/static/images/icon/pavicon.png">

<!-- jQurey -->
<script src="https://code.jquery.com/jquery-latest.min.js" type="application/javascript"></script>

<!-- Bootstrap CSS JS -->
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<!-- Link Swiper's CSS JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"/>
<script src="{% static 'js/swiper-bundle.min.js' %}"></script>

<!-- CARD CSS -->
<link rel="stylesheet" type="text/css" href="{% static 'css/card.css' %}">

<style>
@import url('https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap');

.fixed{
font-family: 'Gamja Flower', cursive;
}
.jb-box { width: 60%; height: 100%; overflow: hidden;margin: 0px auto; position: relative; } /*동영상이 정해진 높이를 벗어나면 보이지 않도록 overflow 속성을 정하기*/
video { width: 100%; height: 100%; } /*좌우 꽉차게 하기*/
.dv-text { position: absolute; top: 18%; width: 100%; } /*텍스트가 동영상 위로 올라가도록 하기*/
.dv-text p { margin-top: -50px; text-align: center; font-size: 1vw; color: #ffffff; } /*텍스트 위치를 조정하고, 모양을 정하기*/

.dv-text2 { position: absolute; top: 20%; width: 100%; }
.dv-text2 p { margin-left: 1vw; text-align: left; font-size: 2vw; color: #ffffff; }

.dv-text3 { position: absolute; top: 20%; width: 100%; }
.dv-text3 p { margin-right: 1vw; text-align: right; font-size: 1vw; color: #ffffff; }

.dv-text4 { position: absolute; top: 60%; width: 100%; }
.dv-text4 p { margin-bottom: 1vw; text-align: center; font-size: 3vw; color: #ffffff; }
.btn1 { border : none; background-color : rgba(0,0,0,0);}

.cafe-text p { margin-top: 10vw; text-align: center; font-size: 1vw; color: #ffffff; }




.swiper {
	width: 60%;
    height: 100%;
}

.swiper-slide {
	text-align: center;
	font-size: 18px;
	background: #fff;
}
.swiper-button-next{
	padding: 10px;
	right: 0;
}
.swiper-button-prev{
	left: 0;
}
.swiper-pagination-bullet{
  background-color: #6E93f7;
  opacity: 1;
}
.swiper-pagination-bullet-active{
  background-color: #4070F4;
}

@media screen and (max-width: 768px) {
  .slide-content{
    margin: 0 10px;
  }
  .swiper-navBtn{
    display: none;
  }
}

.fixed{
width: 100%; height: 100%;           
background-image: url(/static/images/bg.jpg);
background-repeat: no-repeat; /* 배경이미지X */
background-size: cover; /* 요소를 비율에 맞게 커버 */
background-position: center; /* 이미지를 요소의 정가운데로 처리 */
background-attachment: fixed; /* 스크롤바 움직일때 이미지가 따라다님 */
}


</style>

<body class="fixed">
<!-- 네비게이션바 -->
{% include "navbar.html" %}
<div class="jb-box">
	<video muted autoplay loop>
		<source src="/static/videos/sunny.mp4" type="video/mp4">
	</video>

	<div class="dv-text2">
		<p>
			서울특별시 <br />
			{{ gu }} <br />
			{{ dong }} <br />
			<span style="font-size: 6vw;">{{ selected_tmp }}°C</span>
		</p>
	</div>
	<div class="dv-text3">
		<p>
			현재 {{ dong }}의 날씨 정보입니다.</br>
			풍속은 {{ selected_wsd }}m/s 입니다.</br>
            <!--
            위도 경도는 콘솔창에 표시.
            -->
		</p>
	</div>
	<div class="dv-text4">
		<p>
			오늘의 추천 카페 보기<br />
			▼
		</p>
	</div>
</div>

<div class="swiper mySwiper">
	<div class="swiper-wrapper">
      
      {% for i in loop %} <!-- 장고 템플릿 언어로 for 문 생성 --> <!-- views.py의 55 라인 참고 -->
      	<div class="swiper-slide">
			<div class="image-content">
				<span class="overlay"></span>
				<div class="card-image">
					<img src="/static/images/cafe.jpg" alt="" class="card-img">
				</div>
     	 	</div>

			<div class="card-content">
     	 		<h2 class="name">{{ i.name }}</h2>
      			<p class="description">{{ i.addr }}</p>
				{% if 'Members' in request.session %}
				<input type="checkbox" onClick="testfunction(this)" value="{{i.name }}" id="cafe{{ i.num }}" name="checkbox{{ i.num }}">
				{% endif %}
				<button class="button">View More</button>
     		 </div>    	
      	</div>
		{% endfor %}
    
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
<br />

<!-- checkbox value 저장 폼. 추후에 inputType hidden 으로 변경해야 함 -->
<form action="/bookmark/" onsubmit="return checkForm()" name=recommendedCafe" id="recommendedCafe" method="POST">{% csrf_token %}
    {% for i in loop %} <!-- 장고 템플릿 언어로 for 문 생성 -->
    <input type="text" id="cafe{{ i.num }}value" name="cafe{{ i.num }}value" value="">
    {% endfor %}
    <input type="text" id="cafeCnt" name="cafeCnt" value="0">
    {% if 'Members' in request.session %}
    <input type="submit" id="submit" value="북마크 추가">
    {% endif %}
</form>

<script>
    let sum = 0;
    function testfunction(box){
        if(box.checked) { // 체크가 되면 checked==true라는 값을 전달받는다.
            objectValue = box.id + "value";
            document.getElementById(objectValue).value=document.getElementById(box.id).value;
            sum++;
            document.getElementById("cafeCnt").value=parseInt(sum);
        } else if(!box.checked) {
            sum--;
            objectValue = box.id + "value";
            document.getElementById(objectValue).value="";
            document.getElementById("cafeCnt").value=parseInt(sum);
        }
    }
    function checkForm(){
        if (sum == 0) {
            alert("하나 이상 체크하세요");
            return false;
        } else return true;
    }
</script> <!-- 체크박스 제어 함수 -->

<script>
var swiper = new Swiper(".mySwiper", {
  slidesPerView: 3,
  spaceBetween: 30,
  slidesPerGroup: 3,
  loop: true,
  loopFillGroupWithBlank: true,
  pagination: {
    el: ".swiper-pagination",
    clickable: true,
  },
  navigation: {
    nextEl: ".swiper-button-next",
    prevEl: ".swiper-button-prev",
  },
});

</script>    
</body>
</html>